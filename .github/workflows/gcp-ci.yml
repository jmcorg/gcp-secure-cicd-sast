name: gcp-ci
on:
  push:
    branches: [ "main"] # Do not edit this line
    paths-ignore:
      - '**/*.md'
      - '**/*.txt'
  pull_request:
    branches: [ "main"]  # Do not edit this line
  pull_request_target:
  workflow_dispatch:
  
jobs:

  sca:
    name: Software Composition Analysis (SCA) via Dependabot
    permissions:
      security-events: write
      pull-requests: read
    uses: jmcorg/reusableworkflows/.github/workflows/dependabot-prs.yml@main
    secrets: inherit

  # sast:
  #   name: Static Application Security Testing (SAST) # Static Application Security Testing
  #   needs: sca
  #   # call your respective code-scan.ymls . For example: PHP needs to call shiftleft.yml
  #   uses: ZEE-5/zee5-gcp-devsecops/.github/workflows/java-codeql.yml@master #For Java
  #   # uses: ZEE-5/zee5-gcp-devsecops/.github/workflows/javascript-codeql.yml@master #For Javascript
  #   # uses: ZEE-5/zee5-gcp-devsecops/.github/workflows/python-codeql.yml@master #For Python
  #   # uses: ZEE-5/zee5-gcp-devsecops/.github/workflows/shift-left-php.yml@master #For PHP
  #   # uses: ZEE-5/zee5-gcp-devsecops/.github/workflows/golang-codeql.yml@master #For Golang
  #   with: # "with" inputs are not required for non-Java codebases. Please delete the "with" block for non-Java.
  #     build_tool: mvn
  #     build_param: -B package --file pom.xml
  #     java_distribution: 'zulu'
  #     java_version: '17'
  #   secrets: inherit

  # container-scan-PaC-image-push:
  #   name: Container image scan, policy enforcement and push to registry
  #   needs: sast
  #   permissions:
  #     contents: read
  #     id-token: write
  #     packages: write
  #     actions: read
  #     security-events: write
  #   uses: ZEE-5/zee5-gcp-devsecops/.github/workflows/prisma-scan-with-push-after-pac.yml@master
  #   secrets: inherit

  # binary-attestation:
  #   name: Binary Authorization Workflow
  #   needs:
  #     - container-scan-PaC-image-push
  #   uses: ZEE-5/zee5-gcp-devsecops/.github/workflows/binattestation.yml@master
  #   with:
  #     app_imageurl: ${{needs.container-scan-PaC-image-push.outputs.app_imageurl}}
  #   secrets: inherit
